# Sparql-Query:

PREFIX obeu-measure:     <http://data.openbudgets.eu/ontology/dsd/measure/>
    PREFIX obeu-dimension:   <http://data.openbudgets.eu/ontology/dsd/dimension/>
    PREFIX qb:               <http://purl.org/linked-data/cube#>
    PREFIX rdfs:             <http://www.w3.org/2000/01/rdf-schema#>
    PREFIX gr-dimension: <http://data.openbudgets.eu/ontology/dsd/greek-municipalities/dimension/>

    SELECT
        (MIN(?observation) AS ?ID)
        (SUM(?amount) AS ?amount)
        ?economicClass
        ?adminClass
        ?year
        ?budgetPhase
    FROM <http://data.openbudgets.eu/resource/dataset/budget-kilkis-expenditure-2012>
    FROM <http://data.openbudgets.eu/resource/dataset/budget-kilkis-expenditure-2013>
    FROM <http://data.openbudgets.eu/resource/dataset/budget-kilkis-expenditure-2014>
      WHERE {
      ?observation obeu-measure:amount ?amount2 .
      ?observation qb:dataSet/obeu-dimension:fiscalYear ?year .
      ?observation gr-dimension:budgetPhase ?budgetPhase .
      ?slice qb:observation ?observation .
      ?slice gr-dimension:economicClassification ?economicClass .
      ?slice gr-dimension:administrativeClassification ?adminClass .
    }
    GROUP BY ?economicClass ?adminClass ?year ?budgetPhase
    LIMIT 25000



# Input:
1) Prefixes: PREFIX gr-dimension: <http://data.openbudgets.eu/ontology/dsd/greek-municipalities/dimension/>

2) Datasets:
    FROM <http://data.openbudgets.eu/resource/dataset/budget-kilkis-expenditure-2012>
    FROM <http://data.openbudgets.eu/resource/dataset/budget-kilkis-expenditure-2013>
    FROM <http://data.openbudgets.eu/resource/dataset/budget-kilkis-expenditure-2014>

3) Aggregation & selected columns:
    (MIN(?observation) AS ?ID)
        (SUM(?amount) AS ?amount)
        ?economicClass
        ?adminClass
        ?year
        ?budgetPhase
=> Grouping: GROUP BY ?economicClass ?adminClass ?year ?budgetPhase

4) Where-Clause:
      WHERE {
      ?observation obeu-measure:amount ?amount2 .
      ?observation qb:dataSet/obeu-dimension:fiscalYear ?year .
      ?observation gr-dimension:budgetPhase ?budgetPhase .
      ?slice qb:observation ?observation .
      ?slice gr-dimension:economicClassification ?economicClass .
      ?slice gr-dimension:administrativeClassification ?adminClass .
    }

5) Mapping: Column -> Type
 ID -> id
 amount -> target
 economicClass, adminClass, year. budgetPhase -> nominal


